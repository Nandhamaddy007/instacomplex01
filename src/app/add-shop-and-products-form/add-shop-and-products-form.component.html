<div>
  <div *ngIf="formLoaded" class="container">
    <span class="text-danger" *ngIf="">Error</span>
    <form [formGroup]="ClientForm">
      <div class="row">
        <div class="col-md-4">
          <label>Shop Name</label>:
          <input formControlName="shopName" class="form-control" type="text" />
        </div>
        <div class="col-md-4">
          <label>Shop Owner</label>:
          <input formControlName="shopOwner" class="form-control" type="text" />
        </div>
        <div class="col-md-4">
          <label>Shop Owner Mobile</label>:
          <input
            formControlName="shopOwnerMobile"
            class="form-control"
            type="number"
          />
        </div>
      </div>
      <div class="row">
        <div class="col-md-3">
          <label>Shop Owner Email</label>:
          <input
            formControlName="shopOwnerEmail"
            class="form-control"
            type="text"
          />
        </div>

        <div class="col-md-3">
          <label>Shop Owner Instagram ID</label>:
          <input
            formControlName="shopOwnerInstaId"
            class="form-control"
            type="text"
          />
        </div>
        <div class="col-md-3">
          <label>Shop Owner GPAY ID</label>:
          <input
            formControlName="shopOwnerGpay"
            class="form-control"
            type="text"
          />
        </div>
        <div class="col-md-3">
          <label>Shop Owner PAYTM ID</label>:
          <input
            formControlName="shopOwnerPaytm"
            class="form-control"
            type="text"
          />
        </div>
      </div>
      <div class="row">
        <div class="col-md-9">
          <label>Shop Owner Address</label>:
          <input formControlName="shopOwnerAddress"
         class="form-control"
         type="text" />
        </div>
        <div class="col-md-3">
          <label>Shop LOGO</label>:
          <input
            (change)="addLogo($event)"
            class="outline"
            name="uploadfile"
            type="file"
            accept=".png,.jpg"
          />

          <button
            class="btn btn-sm btn-outline-danger"
            *ngIf="dummyLogo['src']"
            (click)="deleteLogo()"
          >
            Delete
          </button>
          <img
            *ngIf="dummyLogo['src']"
            [src]="dummyLogo['src']"
            alt="shop logo displayed here"
            width="200" height="300"
          />
          <!-- 
          <div class="progress" *ngIf="!ClientForm.value['shopLogo']">
            <div
              class="progress-bar progress-bar-striped bg-primary"
              role="progressbar"
              [style.width]="(uploadProgressLogo | async) + '%'"
              [attr.aria-valuenow]="(uploadProgressLogo | async)"
              aria-valuemin="0"
              aria-valuemax="100"
            ></div>
          </div> -->
        </div>
      </div>
      <div class="btn btn-success" style="margin:1rem" (click)="addProduct()">
        Add an Item +
      </div>
      <button (click)="see()">Click</button>
      <div id="product" formArrayName="ProductDetails" class="container"
        *ngFor="let Product of ClientForm.get('ProductDetails')['controls']; let i=index;">
        <h4>Product: {{i+1}}</h4>
        <div [formGroupName]="i">
          <div class="formGroup" style="margin-bottom:0.5rem">
            <label>Product Name</label>:
            <input
              formControlName="productName"
              class="form-control"
              type="text"
            />
          </div>

          <div class="formGroup">
            <input
              type="file"
              class="form-control"
              (change)="addProductImage($event,i)"
              type="file"
              accept=".png,.jpg"
            />
            <img
              *ngIf="ClientForm.get('ProductDetails')
          ['controls'][i].get('productSrc').value"
              [src]="ClientForm.get('ProductDetails')
          ['controls'][i].get('productSrc').value"
              alt="Product image displayed here"
              width="150" height="500"
            />
            <button class="btn btn-outline-danger"  *ngIf="ClientForm.get('ProductDetails')
          ['controls'][i].get('productSrc').value" (click)="deleteProductImage(i)">Delete image</button>
            <!-- <div class="progress">
              <div class="progress-bar progress-bar-striped bg-primary" role="progressbar"
                *ngIf="uploadProgressProducts[i]" [style.width]="(uploadProgressProducts[i] | async) + '%'"
                [attr.aria-valuenow]="(uploadProgressProducts[i] | async)" aria-valuemin="0" aria-valuemax="100"></div>
            </div> -->
            <button
              *ngIf="i>0"
              style="margin-top:0.5rem"
              class="btn btn-danger"
              (click)="RemoveProduct(i)"
            >
              Remove
            </button>
          </div>
          <div class="formGroup">
            <label>Product Color</label>:
            <input
              formControlName="productColor"
              class="form-control"
              type="text"
            />
          </div>
          <div class="btn btn-primary" style="margin-top:0.5rem" (click)="addProductVariance(i)">
            Add Variance +
          </div>
          <div formArrayName="ProductVariance"
            *ngFor="let Variance of Product.get('ProductVariance')['controls']; let j=index;">
            <div [formGroupName]="j">
              <div class="btn btn-danger" *ngIf="j>0" style="margin-top:0.5rem" (click)="RemoveVariance(i,j)">
                Remove Variance
              </div>
              <div class="formGroup">
                <label>Price</label>:
                <input
                  formControlName="productPrice"
                  class="form-control"
                  type="text"
                />
              </div>
              <div class="formGroup">
                <label>Availability</label>:
                <input
                  formControlName="productAvailability"
                  class="form-control"
                  type="text"
                />
              </div>
              <div class="formGroup">
                <label>Size</label>:
                <input
                  formControlName="productSize"
                  class="form-control"
                  type="text"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="btn btn-success" *ngIf="!shopOwnerInstaId" (click)="CreateShop()">
    Submit
  </div>
  <div class="btn btn-primary" *ngIf="shopOwnerInstaId" (click)="updateShop()">
    Submit
  </div>
</div>